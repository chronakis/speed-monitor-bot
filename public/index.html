<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous">
  </script>
  <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-core.js"></script>
  <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-service.js"></script>
  <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-ui.js"></script>
  <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"></script>
  <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css" />

  
  <script src="here-api.js" crossorigin="anonymous"></script>
  <script src="cookie.js" crossorigin="anonymous"></script>
  <script src="explore.js" crossorigin="anonymous"></script>
<style>
#test-cont {
  position: relative;
}
#flow-cont {
  position: relative;
}
#map {
  position: absolute;
  right: 0px;
  top: 0px;
  width: 59%;
  height: 460px;
  border: 1px solid #cdced0;
  background-color: #e4e6e9;
}
#results {
  width:  39%;
  height: 450px;
  border: thin solid grey;
  background: #ddd;
  padding: 0.5em;
  line-height: 1.6em;
  white-space: pre-wrap;
  overflow: scroll;
}
#flow-data {
  position: absolute;
  right: 0px;
  top: 0px;
  width: 59%;
  min-height: 20px;
  background: #eef;
  border: thin solid #cce;
}
#flow-data table {
  border-collapse: collapse; 
  font-family: monospace;
}
#flow-data th, #flow-data td {
  border: 1px solid #fff;
  padding: .3em .6em;
}

.hspace {
  display: inline-block;
  width:  2em;
}
.hspace2 {
  display: inline-block;
  width:  6em;
}
.infopar {
  position: relative;
  border:  thin solid #ccc;
  padding: .3em .2em;
}

.inputpar label {
  width: 180px;
  display: inline-block;
}

.inputpar {
  margin: .4em;
}

.parbutton {
  position: absolute;
  right:  .3em;
  bottom: .3em;
}

#config-output {
  width: 40%;
  background: #efe;
  border: thin solid #cfc;
}
</style>
</head>
<body>
  <p>
    1. Set the API key and optionally a starting bouding box. If you leave empty, it will start form central London
  </p>
  <div class="infopar">
    <div class="inputpar">
      <label for="bbox">API Key: </label><input type="text" name="apiKey" id="apiKey" size="40" /> Please get one from <a href="https://developer.here.com/" target="_blank">developer.here.com</a>
    </div>
    <div class="inputpar">
      <label for="bbox">Bounding Box (bbox): </label><input type="text" name="bbox" id="bbox" size="40" value="51.5298310569666,-0.15522547772949555;51.520013962290236,-0.1218844144792921"/>
      <input type="button" name="go" id="go" value="Fetch map and traffic data" onclick="updateMap()"/>
      <input type="button" name="Set bbox from map" id="bboxFromMap" value="Set bbox from current map view" onclick="mapToBBox()"/>
    </div>
    <div class="inputpar">
    <!--
      <label for="cookie">Auto save to a cookie: </label><input type="checkbox" name="cookie" id="cookie" value="1" checked="true">
    -->
      <input type="button" id="eraseCokie" value="Erase cookie" name="eraseCookie" onclick="eraseParamsCookie()" />
    </div>
    <p>Click on a segment on the left to plot it on the map on the right. It may be out of view so you may need to pan/zoom out. Your filter values for that segment will it the box at the bottom below. BTW, If you want to inspect the flow data, they are in the global variable called <b>trdata</b></p>
  </div>
  <div id="test-cont">
    <div id="results-cont">
      <div id="results"></div>
    </div>
    <div id="map">
    </div>
  </div>
  <div id="flow-cont">
    <div id="config-output">
      <p>2. Note your configuration outputs:</p>
      <div class="inputpar">
        <label for="li">LI (Road Id): </label><input type="text" name="li" id="li" readonly/><span class="hspace"></span>
      </div>
      <div class="inputpar">
        <label for="pc">PC (Segment Id): </label><input type="text" name="pc" id="pc" readonly/>
      </div>
    </div>
    <div id="flow-data">
    </div>
  </div>
</body>
</html>
